{"version":3,"sources":["firebase.js","components/Rate.js","components/Welcome.js","components/Info.js","components/PrevRated.js","App.js","reportWebVitals.js","index.js"],"names":["db","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","getFirestore","Rate","useState","document","setDocument","dialogueLines","setDialogueLines","criteriaScores","setCriteriaScores","gradingTestAnnotation","setGradingTestAnnotation","annotating","setAnnotating","color","rangeList","setRangeList","name","setName","history","useLocation","useHistory","summaryPairs","setSummaryPairs","summarymodels","testannotations","whichAnnotationsJson","console","log","useEffect","localStorage","getItem","getDocument","push","a","texts","JSON","parse","stringify","jsonData","localname","annotatorRef","doc","getDoc","annotatorDoc","exists","data","annotatorData","setDoc","merge","testannotationlength","length","text","Math","floor","random","lines","dialogue","split","expandedLines","forEach","line","out","handleSubmit","currScores","summaryRef","fname","salientInfo","salientInfoAll","i","intervals","slice","sort","b","start","newintervals","j","lineno","end","max","vals","vals2","val","evaluated","pair","key","addDoc","collection","scores","summary","oldtestannotations","criterias","marks","onMouseOverHighlightedWordCallback","range","onTextHighlightedCallback","newDialogueLines","highlightStyle","backgroundColor","className","map","ranges","enabled","onTextHighlighted","id","onMouseOverHighlightedWord","type","onClick","index","newdialogline","undefined","idx","indexOf","undoHighlight","criteria","min","step","onChange","value","passed","Object","keys","checkkey","setScore","defaultValue","Welcome","props","location","setItem","setNameSet","pathname","state","labelCol","span","wrapperCol","initialValues","remember","onFinish","autoComplete","Item","label","rules","required","message","style","maxWidth","offset","htmlType","Info","to","PrevRated","allData","setAllData","allSummaries","setAllSummaries","allDialogueLines","setAllDialogueLines","page","setPage","allScores","setAllScores","vs","getDocuments","testanno","d","dialogueLinesAll","smmrys","arr","parseInt","sm","smmry","salientInfoAllOne","reverse","pop","disabled","simple","defaultCurrent","total","pageSize","App","nameSet","e","mode","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2af2b13a.chunk.js","sourcesContent":["// import { initializeApp } from \"firebase/app\";\n// import { getAnalytics } from \"firebase/analytics\";\n// const admin = require('firexbase-admin');\n// import firestore from \"./firestore\";\n// import \"firebase/firestore\"\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n\nimport { initializeApp } from 'firebase/app';\nimport { getFirestore, collection, getDocs } from 'firebase/firestore';\n// import jsonData from './data/dialogsumtest.json';\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBn8UlIrBqZzILxUlFRofc0k-3U1p6c80Y\",\n  authDomain: \"dialogue-summary-platform.firebaseapp.com\",\n  projectId: \"dialogue-summary-platform\",\n  storageBucket: \"dialogue-summary-platform.appspot.com\",\n  messagingSenderId: \"876002399014\",\n  appId: \"1:876002399014:web:1195c8d72605fa0c7467e7\",\n  measurementId: \"G-QDNY7RFRTS\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n// const analytics = getAnalytics(app);\n\nexport const db = getFirestore();\n\n\n// async function s() {\n//     const querySnapshot = await getDocs(collection(db, \"summaries\"));\n//     querySnapshot.forEach((doc) => {\n//         console.log(`${doc.id} => ${doc.data()}`);\n//     });\n// }\n// s()\n// async function s2() {\n\n\n//     let texts = JSON.parse(JSON.stringify(jsonData))\n\n//     for (let i = 0; i < texts.length; i++) {\n\n//         for (let j = 0; j < 3; j++) {\n//             if (texts[i][\"summary\"+j.toString()]) {\n//                 console.log(texts[i][\"summary\"+j.toString()])\n//             }\n            \n//         }\n//     }\n// }\n// s2()\n\n// admin.initializeApp();\n\n// export const db = admin.firestore();","import React, { useState, useEffect } from 'react';\nimport Slider, { Range } from 'rc-slider';\nimport Tooltip from 'rc-tooltip';\nimport Highlightable from 'highlightable';\n// import jsonData from '../data/dialogsumdata.json';\nimport jsonData from '../data/dialogsumtraincombined.json';\n\nimport whichAnnotationsJson from '../config/testannotations.json';\n\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport 'rc-slider/assets/index.css';\nimport fs from \"fs\";\nimport { db } from '../firebase'; // add\nimport { collection, getDocs, doc, setDoc, getDoc, addDoc  } from 'firebase/firestore';\n// import { } from \"firebase/firestore\"; \nimport { Button } from 'antd';\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport '../App.css';\n\nfunction Rate() {\n  let [document, setDocument] = useState({})\n  let [dialogueLines, setDialogueLines] = useState([])\n  let [criteriaScores, setCriteriaScores] = useState({})\n  let [gradingTestAnnotation, setGradingTestAnnotation] = useState(false)\n  // let [criteriaScoresList, setCriteriaScoresList] = useState([])\n  let [annotating, setAnnotating] = useState(true)\n  // let [highlightsLeft, setHighlightsLeft] = useState({'Salient Information':  })\n  let [color, setColor] = useState('#ffcc80')\n  let [rangeList, setRangeList] = useState([])\n  let [name, setName] = useState(\"\")\n  const location = useLocation();\n  let history = useHistory();\n  // console.log(localStorage.getItem('name'))\n  let [summaryPairs, setSummaryPairs] = useState([])\n  const summarymodels = ['Salesforce/bart-large-xsum-samsum', 'philschmid/distilbart-cnn-12-6-samsum', 'henryu-lin/t5-large-samsum-deepspeed', 'linydub/bart-large-samsum', 'knkarthick/meeting-summary-samsum']\n  const testannotations = whichAnnotationsJson['annotationsidxs']\n  console.log(testannotations)\n\n  useEffect(() => {\n    if (localStorage.getItem('name') && localStorage.getItem('name')!=\"\") {\n      setName(localStorage.getItem('name'))\n      getDocument();\n    } else {\n      // console.log('no name!!!1')\n      history.push(\"/\")\n    }\n\n  }, []);\n\n  const getDocument = async () => {\n    let texts = JSON.parse(JSON.stringify(jsonData))\n    let localname = localStorage.getItem('name')\n    console.log(localname)\n    console.log(name)\n    const annotatorRef = doc(db, 'annotators2', localname);\n    console.log(annotatorRef)\n    let annotatorDoc = await getDoc(annotatorRef)\n    let annotatorData;\n    if (annotatorDoc.exists()) {\n      console.log(\"Document data:\", annotatorDoc.data());\n      annotatorData = annotatorDoc.data()\n    } else {\n      await setDoc(annotatorRef, { name: localname, testannotations: [] }, { merge: true })\n      annotatorData = { name: localname, testannotations: [] }\n    }\n\n    let text;\n    console.log(annotatorData)\n    let testannotationlength = annotatorData.testannotations.length\n    console.log(testannotationlength)\n    if (testannotationlength<20) {\n      text = texts[testannotations[testannotationlength]]\n      setGradingTestAnnotation(true)\n    } else {\n      text = texts[Math.floor(Math.random() * texts.length)]\n      setGradingTestAnnotation(false)\n    }\n    // texts = texts.slice(0,1039)\n    // let text = texts[Math.floor(Math.random() * texts.length)]\n    \n    let lines = text.dialogue.split(\"\\n\")\n    let expandedLines = []\n    lines.forEach(line => {\n      expandedLines.push([line])\n    });\n\n    setDocument(text);\n    setDialogueLines(expandedLines)\n    setRangeList([])\n    // const myset = new Set()\n    // while (myset.size<3) {\n    //   let bucket = [0,1,3,4]\n    //   let randomIndex1 = Math.floor(Math.random()*bucket.length);\n    //   let randnum1 = bucket.splice(randomIndex1, 1)[0];\n    //   let randomIndex2 = Math.floor(Math.random()*bucket.length);\n    //   let randnum2 = bucket.splice(randomIndex2, 1)[0];\n    //   console.log(randnum2, randnum1)\n    //   if (randnum2>randnum1) {\n    //     myset.add(randnum1+' '+randnum2)\n    //   } else {\n    //     myset.add(randnum2+' '+randnum1)\n    //   }\n    // }\n    \n    // let out = []\n    // myset.forEach(pair => {\n    //   let vals = pair.split(\" \").map(Number);\n    //   out.push(vals)\n    // });\n    let out = [[0,3], [1,4], [3,4]]\n    setSummaryPairs(out)\n    console.log(out, text)\n   };\n\n  // useEffect(() => {\n  //    getDocument();\n  //  }, []);\n\n  let handleSubmit = async () => {\n    let currScores = criteriaScores\n    const summaryRef = doc(db, 'summaries', document.fname);\n    let salientInfo = []\n    let salientInfoAll = []\n    for (let i = 0; i < dialogueLines.length; i++) {\n      let intervals = dialogueLines[i].slice(1)\n      intervals = intervals.sort(function(a, b) {\n        if (a.start < b.start) return -1;\n        if (a.start > b.start) return 1;\n        return 0;\n      });\n      let newintervals = []\n      for (let j = 0; j <intervals.length; j++) {\n        if (newintervals.length==0) {\n          newintervals.push({\n            ...intervals[j],\n            lineno: i\n          })\n        } else {\n          if (intervals[j].start <= newintervals[newintervals.length-1].end) {\n            newintervals[newintervals.length-1].end = Math.max( newintervals[newintervals.length-1].end, intervals[j].end)\n          } else {\n            newintervals.push({\n              ...intervals[j],\n              lineno: i\n            })\n          }\n        }\n      }\n        let vals = []\n        let vals2 = []\n        for (let j = 0; j <newintervals.length; j++) {\n          let val = newintervals[j].data.text.slice(newintervals[j].start, newintervals[j].end + 1)\n          vals.push(val)\n          delete newintervals[j]['data'];\n          vals2.push(newintervals[j])\n        }\n        if (vals.length!=0) {\n          salientInfo = [...salientInfo, ...vals]\n          salientInfoAll = [...salientInfoAll, ...vals2]\n        }\n      }\n\n\n      await setDoc(summaryRef, {\n      dialogue: document.dialogue,\n      fname: document.fname,\n      // summary: summaries,\n      evaluated: true\n      \n    }, { merge: true });\n\n    summaryPairs.forEach((pair) => {\n      let key = summarymodels[pair[0]]+' vs ' +summarymodels[pair[1]]\n      if (!(key in currScores)) {\n        currScores[key] = {'Coherence':0, 'Accuracy':0, 'Coverage':0, 'Concise':0, 'Overall Quality':0}\n      }\n    });\n\n    const docRef = await addDoc(collection(db, \"responses\"), {\n      salientInfo: salientInfo,\n      salientInfoAll: salientInfoAll,\n      scores: currScores,\n      summary:  summaryRef,\n      name: name\n    });\n\n    if (gradingTestAnnotation) {\n      console.log(name)\n      const annotatorRef = doc(db, 'annotators2', name);\n      let annotatorDoc = await getDoc(annotatorRef)\n      let annotatorData;\n      if (annotatorDoc.exists()) {\n        console.log(\"Document data:\", annotatorDoc.data());\n        annotatorData = annotatorDoc.data()\n        let oldtestannotations = annotatorData.testannotations\n        console.log(annotatorData)\n        oldtestannotations.push({\n          fname: document.fname,\n          scores: currScores,\n          salientInfo: salientInfo,\n          salientInfoAll: salientInfoAll\n        })\n        console.log(oldtestannotations)\n        await setDoc(annotatorRef, {\n          name: name,\n          testannotations: oldtestannotations\n        }, {merge: true})\n      } \n\n    }\n\n    setAnnotating(true)\n    // setCriteriaScores({'Coherence':-1, 'Accuracy':-1, 'Coverage':-1, 'Concise':-1, 'Overall Quality':-1})\n    setCriteriaScores({})\n    getDocument()\n  }\n\n  let setScore = (value, criteria, pair) => {\n    // console.log(value, criteria, pair)\n    let currScores = criteriaScores\n    // currScores[criteria] = value\n    // let criterialist = criteriaScoresList\n    let key = summarymodels[pair[0]]+' vs ' +summarymodels[pair[1]]\n    let passed = false\n    Object.keys(currScores).forEach((checkkey) => {\n      if (checkkey==key) {\n        currScores[key][criteria] = value\n        passed = true\n      }\n    })\n    if (!passed) {\n      currScores[key] = {'Coherence':0, 'Accuracy':0, 'Coverage':0, 'Concise':0, 'Overall Quality':0}\n      currScores[key][criteria] = value\n    }\n    // console.log(currScores)\n    // setCriteriaScoresList(criterialist)\n    setCriteriaScores(currScores)\n  }\n\n  let criterias = ['Coherence', 'Accuracy', 'Coverage', 'Concise', 'Overall Quality']\n  // let criteriaChangeFunctions = {'Coherence':callbackSetCoherence, 'Accuracy':callbackSetAccuracy, 'Coverage':callbackSetCoverage, 'Concise':callbackSetConcise, 'Overall Quality':callbackSetOverall}\n  \n  let marks= {\n      \"-2\": ' A mostly better',\n      \"-1\": 'A partially better',\n      0: 'both  equal',\n      1: 'B partially better',\n      2: 'B mostly better'\n  };\n\n\n  let undoHighlight = () => {\n    let newdialogline = undefined\n    let index\n    if (rangeList.length>0) {\n      for (let i = 0; i < dialogueLines.length; i++) {\n        let idx = dialogueLines[i].indexOf(rangeList[rangeList.length - 1])\n        // console.log(idx, i, rangeList[-1])\n        if (idx>-1) {\n          newdialogline = [...dialogueLines[i].slice(0, idx), ...dialogueLines[i].slice(idx + 1)]\n          index = i\n        }\n      }\n\n      if (newdialogline) {\n        dialogueLines[index] = newdialogline\n        setRangeList(rangeList.slice(0, -1))\n        setDialogueLines(dialogueLines)\n      }\n\n    }\n  }\n\n  let onMouseOverHighlightedWordCallback = (range) => {}\n  let onTextHighlightedCallback = (range) => {  \n    let newDialogueLines = []\n    dialogueLines.forEach(line => {\n      if (line[0]==range.data.text) {\n        range.data.highlightStyle ={\n          backgroundColor: color\n        }\n        line.push(range)\n      }\n      newDialogueLines.push(line)\n    });\n    setDialogueLines(newDialogueLines)\n    setRangeList([...rangeList, range])\n  }\n  // console.log(document)\n  \n  return (\n    <div className=\"Rate\">\n      <div>\n        <h2>Hello {name}! Please Highlight Dialogue <em>{document.fname}</em> below!</h2>\n        <h4>Please do not highlight multiple lines in one highlight.</h4>\n\n      </div>\n      {\n        dialogueLines ? \n        <div className='Summaries'>\n          <div className=\"SummaryVal\">\n        { dialogueLines.map((line) =>(\n          <div className=\"RubricText\"> \n          {line ? \n           <Highlightable \n          //  ranges={}\n            ranges={line.slice(1,line.length)}\n            enabled={annotating}\n            onTextHighlighted={onTextHighlightedCallback}\n            id={1}\n            onMouseOverHighlightedWord={onMouseOverHighlightedWordCallback}\n            highlightStyle = {{\n              backgroundColor: color\n            }}\n            text={line[0] || \"\"}\n          />\n          : <>hi</>}\n          </div>\n        ) ) }\n        </div>\n        <div className=\"ColorButtons\">\n          <button type=\"primary\" onClick={() => undoHighlight(color)} > Undo Highlight </button>\n        </div>\n        </div> \n        : <>hi2</>\n      }\n\n      {\n        annotating ? <div>\n              <div>\n                Click Below once you are done annotating\n              </div>\n            <Button type=\"primary\" onClick={()=>setAnnotating(false)} >Done Annotation</Button>\n        </div>: <></>\n      }\n   \n      {annotating ?  <></>:\n\n       <>\n        {\n         summaryPairs.map((pair, index) =>\n\n         <div className=\"finalbutton\"> \n\n         <div className=\"Summaries\" >\n           <div className=\"SummaryVal\">\n             <div><h2>Summary A</h2></div>\n               {document['summary'+summarymodels[pair[0]]]}\n             </div>\n           \n           <div className=\"SummaryVal\">\n             <div><h2>Summary B</h2></div>\n               {document['summary'+summarymodels[pair[1]]]}\n             </div>\n         </div>\n         {criterias.map((criteria) => (\n                       <div className=\"ratings\">\n                         <div className=\"ratingstext\">\n                             <h3>Please compare the two above summaries in regards to their {criteria}</h3>\n                         </div>\n                         <Slider  min={-2} max={2} marks={marks} step={null} onChange={(value) => setScore(value, criteria, pair)} defaultValue={0} />\n                       {/* <Slider  min={-2} max={2} marks={marks} step={null} onChange={criteriaChangeFunctions[criteria]} defaultValue={0} /> */}\n                       </div>\n               ))}\n               \n       </div>\n\n         )\n       }\n       <div className=\"finalbutton\">         <Button type=\"primary\" onClick={handleSubmit} >Submit Results</Button>\n  </div>\n      </>\n      \n      }\n        {/* <Slider  min={1} marks={marks('Coherence')} step={null} onChange={criteriaChangeFunctions['Coherence']} defaultValue={-1} /> */} \n    </div>\n  );\n}\n\nexport default Rate;\n","import React, { useState, useEffect } from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link, \n  useHistory,\n  useLocation\n} from \"react-router-dom\";\nimport '../App.css';\n\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css';\n// import './index.css';\n\nimport { Form, Input, Button, Checkbox } from 'antd';\n\n\n\nfunction Welcome(props) {\n\n\n\n  let history = useHistory()\n  let location = useLocation()\n  let [name, setName] = useState(\"\")\n  console.log(location)\n  let handleSubmit = (value) => {\n    localStorage.setItem('name', value.name)\n    props.setNameSet(true)\n    setName(value.name)\n    history.push({\n        pathname: '/rate',\n        state: { \n            name: value.name \n        },\n      });\n  }\n\n  useEffect(() => {\n    console.log(name)\n    if (localStorage.getItem(\"name\")   && localStorage.getItem('name')!=\"\") {\n    //   setNameSet(true)\n      setName(localStorage.getItem(\"name\") )\n    }\n  }, []);\n\n  return (\n    <div className=\"App\">\n        {name ? <>\n        \n        <h2>Welcome to SALT Lab Dialogue Grading Platform!</h2>\n        <p>Please click on the info tab above to get instructions and information about the system. </p>\n        <p>Thanks for entering a unique identifier! It is set as <b>{name}</b>.</p>\n        <p>Feel free to change the identifier if needed! If not you can go ahead and start rating by clicking on the rate tab. </p>\n        <p>Notice that if you join on a different browser/device you will need to put this unique identifier!</p>\n        \n        <Form\n            name=\"basic\"\n            labelCol={{\n                span: 8,\n            }}\n            wrapperCol={{\n                span: 16,\n            }}\n            initialValues={{\n                remember: true,\n            }}\n            onFinish={handleSubmit}\n            // onFinishFailed={}\n            autoComplete=\"off\"\n            >\n            <Form.Item\n                label=\"Enter your full name or a unique identifier \"\n                name=\"name\"\n                rules={[\n                {\n                    required: true,\n                    message: 'Please enter your name',\n                },\n                ]}\n            >\n                <Input style={{ maxWidth: \"250px\" }}  defaultValue = {name} />\n            </Form.Item>\n\n            <Form.Item\n                wrapperCol={{\n                offset: 8,\n                span: 16,\n                }}\n            >\n                <Button type=\"primary\" htmlType=\"submit\" >\n                Submit\n                </Button>\n            </Form.Item>\n            </Form>\n\n\n        </>:<>\n\n        <h2>Welcome to SALT Lab Dialogue Grading Platform!</h2>\n        <p>Please click on the info link above to get instructions and information about the system. </p>\n        <p>To start grading, we need a unique identifer. This can be your full name, or a unique identity.</p>\n        <p>If you join on a different browser/device you will need to put this unique identifier!</p>\n\n        <Form\n            name=\"basic\"\n            labelCol={{\n                span: 8,\n            }}\n            wrapperCol={{\n                span: 16,\n            }}\n            initialValues={{\n                remember: true,\n            }}\n            onFinish={handleSubmit}\n            // onFinishFailed={}\n            autoComplete=\"off\"\n            >\n            <Form.Item\n                label=\"Enter your full name or a unique identifier \"\n                name=\"name\"\n                rules={[\n                {\n                    required: true,\n                    message: 'Please enter your name',\n                },\n                ]}\n            >\n                <Input style={{ maxWidth: \"250px\" }}/>\n            </Form.Item>\n\n            <Form.Item\n                wrapperCol={{\n                offset: 8,\n                span: 16,\n                }}\n            >\n                <Button type=\"primary\" htmlType=\"submit\" >\n                Submit\n                </Button>\n            </Form.Item>\n            </Form>\n        \n        \n        </>}\n        \n    </div>\n  );\n}\n\nexport default Welcome;\n","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport '../App.css';\nimport { Button } from 'antd';\n\n\n\nfunction Info() {\n  return (\n    <div className=\"info\">\n        <div className=\"section\">\n            <h2>Goal</h2>\n            <h4>SALT lab is using this tool for help gather dialogue summarization labeled data to better develop data to generate better dialogue summaries!</h4>\n            <h4>For this we are looking at two directions: </h4>\n            <p>1 Give salient information of the document</p>\n            <p>2 Rate the summaries on 5 different aspects dialogue summary</p>\n\n        </div>\n        <div className=\"section\">\n            <h2>What is a Good Summary?</h2>\n            <p> Roughly speaking, a good summary is a shorter piece of text that has the essence of the original. </p>\n            <p>– tries to accomplish the same purpose and conveys the same information as the original post. </p>\n            <p> In our case this is we are looking for dialogue summaries so we want the summaries to make sense within the context of a conversation!</p>\n        </div>\n\n        <div className=\"section\">\n            <h2>How to grade Salient Information?</h2>\n            <p> In essence, we want you to highlight the important information of the document. </p>\n            <p>This information you highlight needs to be that of which would be helpful in generating a summary.</p>\n            <ul>\n                <li>The information can be phrases, sentences, or a couple of words.</li>\n                <li>Speakers’ <b>intents</b> should be included, if they can be clearly identified.</li>\n                <li><b>Events/topics</b> in the conversation should be included, if they can be clearly identified</li>\n                <li>The highlighted information could include important <b>discourse relations, particularly causal relations</b></li>\n                <li>The highlighted information should include <b>important emotions</b> related to events in the summary if there are any.</li>\n            </ul>\n            <p>We want a minimum of 3 higlights and a maximum of 8 highlights per dialogue</p>\n        </div>\n\n        <div className=\"section\">\n            <h2>Rate Summaries on Different Criteria</h2>\n            <h4> After you have hilighted the salient information, we will give you 2 distinct summaries of the corresponding dialogue.</h4>\n            <h4> We will have you compare the two summaries in different dimensions:</h4>\n            <ol>\n                <li>Coherence: Easy to understand and free of English errors.</li>\n                <li>Accuracy: Information stated in the summary is accurate and has no incorrect information.</li>\n                    <ul>\n                        <li> It is not misleading</li>\n                        <li>Doesn’t have much minor errors </li>\n                    </ul>\n                <li>Coverage: Mentions main information of the conversation. Convey the most salient information of the dialogue</li>\n                <li>Concise: Summary is short and to the point. It doesn’t have too much fluff.  </li>\n                <li>Overall Quality: What is your personal preference by the definition of a summary.</li>\n            </ol>\n            <p>We want a minimum of 3 higlights and a maximum of 8 highlights per dialogue</p>\n        </div>\n         <Link to=\"/\">\n            <Button type=\"primary\" >\n                    Start Grading!\n            </Button>\n        </Link>\n\n    </div>\n  );\n}\n\nexport default Info;\n","import React, { useState, useEffect } from 'react';\nimport Slider, { Range } from 'rc-slider';\nimport Tooltip from 'rc-tooltip';\nimport Highlightable from 'highlightable';\nimport jsonData from '../data/dialogsumtraincombined.json';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport 'rc-slider/assets/index.css';\nimport fs from \"fs\";\nimport { db } from '../firebase'; // add\nimport { collection, getDocs, doc, setDoc, getDoc, where, query  } from 'firebase/firestore';\n// import { } from \"firebase/firestore\"; \nimport { Pagination } from 'antd';\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport whichAnnotationsJson from '../config/testannotations.json';\n\nimport '../App.css';\n\nfunction PrevRated() {\n  let [document, setDocument] = useState({})\n  let [dialogueLines, setDialogueLines] = useState([])\n  let [criteriaScores, setCriteriaScores] = useState({'Coherence':0, 'Accuracy':0, 'Coverage':0, 'Concise':0, 'Overall Quality':0})\n  let [annotating, setAnnotating] = useState(true)\n  // let [highlightsLeft, setHighlightsLeft] = useState({'Salient Information':  })\n  let [color, setColor] = useState('#ffcc80')\n  let [rangeList, setRangeList] = useState([])\n  const location = useLocation();\n  let history = useHistory();\n  let [name, setName] = useState(\"\")\n  let [allData, setAllData] = useState([])\n  let [allSummaries, setAllSummaries] = useState([])\n  let [allDialogueLines, setAllDialogueLines] = useState([])\n  let [page, setPage] = useState(1)\n  let [summaryPairs, setSummaryPairs] = useState([])\n  let [allScores, setAllScores] = useState([])\n  let [fname, setFnames] = useState([])\n  const summarymodels = ['Salesforce/bart-large-xsum-samsum', 'philschmid/distilbart-cnn-12-6-samsum', 'henryu-lin/t5-large-samsum-deepspeed', 'linydub/bart-large-samsum', 'knkarthick/meeting-summary-samsum']\n  let vs = ['Salesforce/bart-large-xsum-samsum vs linydub/bart-large-samsum', 'linydub/bart-large-samsum vs knkarthick/meeting-summary-samsum', 'philschmid/distilbart-cnn-12-6-samsum vs knkarthick/meeting-summary-samsum']\n  const testannotations = whichAnnotationsJson['annotationsidxs']\n  const getDocuments = async () => {\n    // const stateQuery = query(collection(db, \"responses\"), where(\"name\", \"==\", localStorage.getItem('name')));\n    // const querySnapshot = await getDocs(stateQuery);\n    let localname = localStorage.getItem('name')\n    const annotatorRef = doc(db, 'annotators2', localname);\n\n    let annotatorDoc = await getDoc(annotatorRef)\n    let testanno   = annotatorDoc.data().testannotations\n    console.log(testanno)\n    let d = []\n\n    testanno.forEach((doc) => {\n        d.push(doc)\n      });\n    console.log('lasty', d)\n    setAllData(d)\n    let dialogueLinesAll = []\n    let smmrys = []\n    let texts = JSON.parse(JSON.stringify(jsonData))\n    let out = [[0,3], [1,4], [3,4]]\n    let scores = []\n    setSummaryPairs(out)\n    for (let i = 0; i < d.length; i++) {\n      // const docSnap = await getDoc(d[i].summary);\n      // let smmrydata = docSnap.data()\n      let arr = d[i].fname.split(\"_\")\n      let fname = arr[arr.length-1]\n      // console.log(fname)\n      let text = texts[parseInt(fname)]\n      // console.log(text)\n      let sm = []\n      scores.push(d[i].scores)\n\n      out.forEach((pair) => {\n        let first = text['summary'+summarymodels[pair[0]]]\n        let second = text['summary'+summarymodels[pair[1]]]\n        let smmry = [first, second]\n        // console.log(first, second)\n        sm.push(smmry)\n      });\n      smmrys.push(sm)\n\n      let salientInfoAllOne = [...d[i].salientInfoAll].reverse()\n      let lines = text.dialogue.split(\"\\n\")\n      let dialogueLines = []\n      for (let j = 0; j < lines.length; j++) {\n        let line = [lines[j]]\n        // dialogueLines.push(lines[j])\n        while (salientInfoAllOne.length > 0 && salientInfoAllOne[salientInfoAllOne.length-1].lineno==j) {\n          line.push(salientInfoAllOne.pop())\n        }\n        dialogueLines.push(line)\n      }\n      dialogueLinesAll.push(dialogueLines)\n    }\n    // console.log(dialogueLinesAll)\n    // console.log(scores[1-1][vs[1]])\n    setAllDialogueLines(dialogueLinesAll)\n    setAllSummaries(smmrys)\n    setAllScores(scores)\n    // console.log(smmrys, dialogueLinesAll, d)\n    // console.log('summaries', smmrys)\n   };\n\n  useEffect(() => {\n    if (localStorage.getItem('name') && localStorage.getItem('name')!=\"\") {\n        setName(localStorage.getItem('name'))\n      } else {\n        console.log('no name!!!1')\n        history.push(\"/\")\n      }\n      getDocuments()\n  }, []);\n\n  let criterias = ['Coherence', 'Accuracy', 'Coverage', 'Concise', 'Overall Quality']\n  \n  let marks= {\n      \"-2\": ' A mostly better',\n      \"-1\": 'A partially better',\n      0: 'both  equal',\n      1: 'B partially better',\n      2: 'B mostly better'\n  };\n\n  let onMouseOverHighlightedWordCallback = (range) => {}\n  let onTextHighlightedCallback = (range) => {  \n    let newDialogueLines = []\n    dialogueLines.forEach(line => {\n      if (line[0]==range.data.text) {\n        range.data.highlightStyle ={\n          backgroundColor: color\n        }\n\n        line.push(range)\n      }\n      newDialogueLines.push(line)\n    });\n    setDialogueLines(newDialogueLines)\n    setRangeList([...rangeList, range])\n  }\n  \n  let onChange = (value) => {\n    setPage(value)\n  }\n  \n  return (\n    <div className=\"Rate\">\n      <div>\n        <h2>{name}'s Previously Rated Dialogues</h2>\n        </div>\n        \n        { (allData && allData.length!=0 && allSummaries && allSummaries.length!=0 && allDialogueLines && allDialogueLines.length!=0) ? <> \n          <h3>Your Results for Particular Dialogue {allData[page-1].fname}</h3>\n        <h4>Your Highlighted Salient Information</h4>\n      {\n        allDialogueLines[page-1] ? \n        <div className='Summaries'>\n          <div className=\"SummaryVal\">\n        { allDialogueLines[page-1].map((line) =>(\n          <div className=\"RubricText\"> \n          {line ? \n           <Highlightable \n          //  ranges={}\n            ranges={line.slice(1,line.length)}\n            enabled={false}\n            onTextHighlighted={onTextHighlightedCallback}\n            id={\"1\"}\n            onMouseOverHighlightedWord={onMouseOverHighlightedWordCallback}\n            highlightStyle = {{\n              backgroundColor: color\n            }}\n            text={line[0] || \"\"}\n          />\n          : <></>}\n          </div>\n        ) ) }\n        </div>\n        </div> \n        : <></>\n      }\n       \n      { \n       (allSummaries  && allScores && allScores.length!=0 && allSummaries.length!=0   ) ? \n         summaryPairs.map((pair, index) =>\n\n         <div className=\"finalbutton\"> \n\n         <div className=\"Summaries\" >\n           <div className=\"SummaryVal\">\n             <div><h2>Summary A</h2></div>\n               {allSummaries[page-1][index][0]\n              //  document['summary'+summarymodels[pair[0]]]\n               }\n             </div>\n           \n           <div className=\"SummaryVal\">\n             <div><h2>Summary B</h2></div>\n               {\n                 allSummaries[page-1][index][1]\n              //  document['summary'+summarymodels[pair[1]]]\n               }\n             </div>\n         </div>\n         {criterias.map((criteria) => (\n                       <div className=\"ratings\">\n                         <div className=\"ratingstext\">\n                             <h3>Please compare the two above summaries in regards to their {criteria}</h3>\n                         </div>\n                         <Slider  min={-2} max={2} marks={marks} step={null}  value={allScores[page-1][vs[index]][criteria]   || 0} disabled={true}/>\n                         {/* <Slider  min={-2} max={2} marks={marks} step={null} onChange={(value) => setScore(value, criteria, pair)} defaultValue={0} /> */}\n                       {/* <Slider  min={-2} max={2} marks={marks} step={null} onChange={criteriaChangeFunctions[criteria]} defaultValue={0} /> */}\n                       </div>\n               ))}\n       </div>\n         )\n          :<></> \n       }\n\n      <Pagination simple onChange={onChange} defaultCurrent={1} total={allDialogueLines.length} pageSize={1} />\n\n\n        </>:<></>}\n\n    </div>\n  );\n}\n\nexport default PrevRated;\n","import React, { useState, useEffect } from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  HashRouter\n} from \"react-router-dom\";\nimport './App.css';\nimport Rate from './components/Rate';\nimport Welcome from './components/Welcome';\nimport Info from './components/Info';\nimport PrevRated from './components/PrevRated';\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { Menu } from 'antd';\n\n\nfunction App() {\n  let [nameSet, setNameSet] = useState(false)\n  // let [name, setName] = useState(\"\")\n\n\n  // let location = useLocation()\n\n  let handleClick = e => {\n    console.log('click ', e);\n    // this.setState({ current: e.key });\n    // console.log(location.pathname.replace(\"/\", \"\"))\n  };\n\n\n  useEffect(() => {\n    if (localStorage.getItem(\"name\")   && localStorage.getItem('name')!=\"\") {\n      setNameSet(true)\n      // setName(localStorage.getItem(\"name\") )\n    }\n  }, []);\n\n\n  return (\n    <div className=\"App\">\n      <HashRouter>\n        <div>\n          <nav>\n          <Menu onClick={handleClick}   mode=\"horizontal\">\n            <Menu.Item key=\"welcome\"><Link to=\"/\"> Set Name </Link></Menu.Item>\n            <Menu.Item key=\"rate\" disabled={!nameSet}><Link to=\"/rate\"> Rate Summaries </Link></Menu.Item>\n            <Menu.Item key=\"info\"><Link to=\"/info\">Information about Grading </Link></Menu.Item>\n            <Menu.Item key=\"prevrated\" disabled={!nameSet}><Link to=\"/prevrated\">Previously Rated</Link></Menu.Item>\n            {/* <SubMenu title=\"SubMenu\">\n              <Menu.Item>SubMenuItem</Menu.Item>\n            </SubMenu> */}\n          </Menu>\n          </nav>\n\n          <Switch>\n            <Route path=\"/info\">\n              <Info />\n            </Route>\n            <Route path=\"/rate\">\n              <Rate />\n            </Route>\n            <Route path=\"/prevrated\">\n              <PrevRated />\n            </Route>\n            <Route path=\"/\">\n              <Welcome setNameSet={setNameSet} />\n            </Route>\n          </Switch>\n        </div>\n      </HashRouter>      \n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}